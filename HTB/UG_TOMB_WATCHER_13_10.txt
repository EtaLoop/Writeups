Windows avec creds = nxc smb avec les creds

Bloohound = nxc lap ... --bloudhound -c All --dns-server <ip>

- Demande ticket SPN: demande service en tant qu'alfred

-> TargetedKerberos + john

BloodyAD: getObject/getWritable -> savoir les perms

BloodyAD -> --add groupMember infrastructure alfred

gMSADumper

User ansible: peut changer mdp de sam
-> avec BloodyAD: set password sam

owneredit action write + ajouter tous les droits à jonh

- ShadowCredential attack = pywhisker/ -> donne hash gMSADumper
- connection winRM

-> certipy = liste les certificats

John a les perms sur dossier ADCS

Get-ADObject -Filter 'isDeleted $eq $true' -IncludeDeteledObjects

certADMIN a comme parent ADCS


Restore-ADObject -Identity user_id = on restore cert_admin
-> ShadowCredential
-> certipy = trouve vulnerabilité ESC15 = peut modifié l'application polycies
-> on obtient un certificat pirate (admin)

-> on demande un certificat pour un user régulier (admin)

certipy auth -pfx